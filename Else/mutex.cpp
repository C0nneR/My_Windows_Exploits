#include <stdio.h>
#include <tchar.h>
#include <Windows.h>

BOOL AlreadyRunning() {
	HANDLE hMutex = NULL;
	hMutex = CreateMutex(NULL, FALSE, _T("test"));
	if (hMutex) {
		if (ERROR_ALREADY_EXISTS == GetLastError()) {
			return TRUE;
		}
	}
	return FALSE;
}

int main() {
	if (AlreadyRunning()) {
		printf("Running.\n");
	}
	else {
		printf("Not running.\n");
	}

	system("pause");
	return 0;
}